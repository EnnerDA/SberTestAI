# SberTestAI
ИИ агент, который будет анализировать доступные банковские вклады и рекомендовать наиболее подходящие варианты для пользователя на основе его финансовых целей, предпочтений и текущей экономической ситуации.

## Концепция
В первой версии ИИ (GigaChat) будет заниматься опросом клиента о его предпочтениях к вкладу. Данные о возможных вкладах помещены в Sber_test.csv. 
На основе полученных данных мы по написанному нами алгоритму вычисляем подходящий вклад и рекомендуем его клиенту.

Есть **Вклады** и **Пожелания клиента**.

У **Вкладов** есть основные параметры:
1. Наименование (name)
2. Процентная ставка (interest_rate)
3. Минимальный срок (term_days_min)
4. Максимальный срок (term_days_max)
5. Минимальная сумма (min_amount)
6. Валюта (currency)
7. Возможность пополнения (replenishment)
8. Возможность снятия денег (withdrawal)
9. Капитализация (capitalization)
10. Ссылка на описание вклада (link)

У **Пожелания клиента** основные параметры:

класс `UserPreferences`
1. Срок депозита (deposit_term)
2. Сумма денег для вклада (amount)
3. Валюта (currency)
4. Возможность пополнения (replenishment)
5. Возможность снятия (withdrawal) 
6. Капитализация (capitalization)

## Алгоритм подбора вклада
Учитывая, что у нас всего 6 параметров, используем простой и прозрачный алгоритм на основе условных конструкций if-else. 
Такой подход гарантирует предсказуемость результата, и не требует сложных вычислений.

Функция `choose_deposit`
- Фильтрация по сроку +-месяц от пожеланий. Берем пожелания клиента о сроке вклада и выбираем подходящий +-15 дней.
- Отсеиваем вклады минимальная сумма на которых выше чем желаемая сумма вклада у клиента.
- Оставляем только вклады с желаемой клиентом валютой.
- Если клиент хочет иметь возможность пополнять вклад исключим вклады не позволяющие это делать.
- Аналогично со снятием
- Аналогично с капитализацией
- Остающиеся варианты сортируем по убыванию процентной ставки.
Первую строку (вклад с максимальной ставкой из оставшихся) выдаем в качестве рекомендации.

## Результаты
На модели **GigaChat Max**, получался ожидаемый приемлемый результат. Т.е. LLM вела опрос клиента и при достаточности данных запускала функцию `choose_deposit`. В результате отправляла пользователю строку, возвращаемую функцией.
Однако так же был результат с уходом в рекурсию и выжиганием остатка токенов. 

На модели **Giga Chat** результат часто уходит в рекурсию, либо не корректно принимает даже дружелюбно направленные данные
<img width="1101" height="607" alt="image" src="https://github.com/user-attachments/assets/48ee7e8a-0c88-48cc-a434-c9d2f28fad7d" />
<img width="928" height="792" alt="image" src="https://github.com/user-attachments/assets/c97f6123-6b2e-40b5-af11-08ae53662dd1" />

## Варианты дальнейших действий
1. Вручную прописывать этапы диалога, контролировать получение всех пожеланий пользователя и только после этого вызывать `choose_deposit`. Так сможем использовать более простые модели и снизить стоимость запроса.
2. Ввести уровень опроса клиента с неявными описаниями пожеланий. Например, "хочу накопить на машину", "хочу сохранить до юбилея", хочу получать пассивный доход. Гипотеза в том, что диалог будет проще для клиента, уменьшаем количество шагов до рекомендации, следовательно, больший процент клиентов дойдут до этапа принятия решения и перехода к нему.
3. Ввести варианты инвестиций, ценных бумаг и усложнить алгоритм рекомендации вложения денег.
